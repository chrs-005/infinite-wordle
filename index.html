<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Infinite Wordle</title>
  <style>
    :root{
      --bg:#121213;
      --panel:#1a1a1b;
      --text:#d7dadc;
      --muted:#818384;
      --border:#3a3a3c;

      --correct:#538d4e;
      --present:#b59f3b;
      --absent:#3a3a3c;

      --tile:62px;
      --gap:8px;
      --radius:10px;
      --font: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:var(--font);
      background:var(--bg);
      color:var(--text);
      display:flex;
      flex-direction:column;
      min-height:100vh;
    }

    header{
      padding:14px 18px;
      border-bottom:1px solid var(--border);
      display:flex;
      align-items:center;
      justify-content:space-between;
    }

    header h1{
      margin:0;
      font-size:18px;
      letter-spacing:0.5px;
      text-transform:uppercase;
    }

    .btn{
      border:1px solid var(--border);
      background:transparent;
      color:var(--text);
      padding:8px 12px;
      border-radius:10px;
      cursor:pointer;
      font-weight:600;
    }

    main{
      width:min(540px, 94vw);
      margin:0 auto;
      padding:18px 0;
      flex:1;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:14px;
    }

    .toast{
      min-height:24px;
      font-weight:700;
      opacity:0;
      transition:.15s;
    }
    .toast.show{opacity:1}

    .board{
      display:flex;
      flex-direction:column;
      gap:8px;
    }

    .row{
      display:grid;
      grid-template-columns:repeat(5, 62px);
      gap:8px;
    }

    .tile{
      width:62px;
      height:62px;
      border:2px solid var(--border);
      border-radius:10px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:32px;
      font-weight:800;
      text-transform:uppercase;
      background:var(--panel);
    }

    .tile.filled{border-color:#565758}
    .tile.correct{background:var(--correct);border-color:var(--correct)}
    .tile.present{background:var(--present);border-color:var(--present)}
    .tile.absent{background:var(--absent);border-color:var(--absent)}

    .keyboard{
      display:flex;
      flex-direction:column;
      gap:8px;
    }

    .kb-row{
      display:flex;
      justify-content:center;
      gap:6px;
    }

    .key{
      height:52px;
      min-width:36px;
      padding:0 10px;
      border-radius:12px;
      background:#818384;
      border:none;
      font-weight:800;
      cursor:pointer;
      text-transform:uppercase;
    }

    .key.wide{min-width:72px}
    .key.correct{background:var(--correct)}
    .key.present{background:var(--present)}
    .key.absent{background:var(--absent);color:#d7dadc}
  </style>
</head>

<body>
<header>
  <h1>Infinite Wordle</h1>
  <button class="btn" id="clearBtn">Clear</button>
</header>

<main>
  <div class="toast" id="toast"></div>
  <div class="board" id="board"></div>
  <div class="keyboard" id="keyboard"></div>
</main>

<script>
(() => {

  // ============================================================
  // EDIT YOUR HIDDEN WORD HERE (exactly 5 letters, a–z)
  // ============================================================
  const SECRET_WORD = "apple"; // <-- CHANGE THIS
  // ============================================================

  const answer = SECRET_WORD.toLowerCase();

  const board = document.getElementById("board");
  const keyboard = document.getElementById("keyboard");
  const toast = document.getElementById("toast");
  const clearBtn = document.getElementById("clearBtn");

  const KEYS = [
    ["q","w","e","r","t","y","u","i","o","p"],
    ["a","s","d","f","g","h","j","k","l"],
    ["enter","z","x","c","v","b","n","m","back"]
  ];

  const state = {
    rows: [],
    current: [],
    keyStatus: new Map(),
    gameOver: false
  };

  function showToast(msg){
    toast.textContent = msg;
    toast.classList.add("show");
    setTimeout(()=>toast.classList.remove("show"),1200);
  }

  function score(guess){
    const res = Array(5).fill("absent");
    const a = answer.split("");
    const g = guess.split("");

    for(let i=0;i<5;i++){
      if(g[i]===a[i]){
        res[i]="correct";
        a[i]=g[i]=null;
      }
    }
    for(let i=0;i<5;i++){
      if(g[i] && a.includes(g[i])){
        res[i]="present";
        a[a.indexOf(g[i])] = null;
      }
    }
    return res;
  }

  function submit(){
    if(state.current.length<5 || state.gameOver) return;

    const guess = state.current.join("");
    const result = score(guess);

    state.rows.push({letters:[...state.current],result});
    state.current=[];

    result.forEach((r,i)=>{
      const l=guess[i];
      const prev=state.keyStatus.get(l);
      if(!prev || r==="correct" || (r==="present" && prev==="absent"))
        state.keyStatus.set(l,r);
    });

    if(result.every(r=>r==="correct")){
      state.gameOver=true;
      showToast("Correct!");
    }

    render();
  }

  function render(){
    board.innerHTML="";
    state.rows.forEach(r=>{
      const row=document.createElement("div");
      row.className="row";
      r.letters.forEach((l,i)=>{
        const t=document.createElement("div");
        t.className="tile "+r.result[i];
        t.textContent=l;
        row.appendChild(t);
      });
      board.appendChild(row);
    });

    if(!state.gameOver){
      const row=document.createElement("div");
      row.className="row";
      for(let i=0;i<5;i++){
        const t=document.createElement("div");
        t.className="tile"+(state.current[i]?" filled":"");
        t.textContent=state.current[i]||"";
        row.appendChild(t);
      }
      board.appendChild(row);
    }

    keyboard.innerHTML="";
    KEYS.forEach(r=>{
      const row=document.createElement("div");
      row.className="kb-row";
      r.forEach(k=>{
        const b=document.createElement("button");
        b.className="key"+(k.length>1?" wide":"");
        b.textContent=k==="back"?"⌫":k;
        if(state.keyStatus.get(k)) b.classList.add(state.keyStatus.get(k));
        b.onclick=()=>{
          if(k==="enter") submit();
          else if(k==="back") state.current.pop();
          else if(state.current.length<5) state.current.push(k);
          render();
        };
        row.appendChild(b);
      });
      keyboard.appendChild(row);
    });
  }

  clearBtn.onclick=()=>{
    state.rows=[];
    state.current=[];
    state.keyStatus.clear();
    state.gameOver=false;
    render();
  };

  document.addEventListener("keydown",e=>{
    if(e.key==="Enter") submit();
    else if(e.key==="Backspace") state.current.pop();
    else if(/^[a-z]$/i.test(e.key) && state.current.length<5)
      state.current.push(e.key.toLowerCase());
    render();
  });

  render();
})();
</script>
</body>
</html>
